# Render Blueprint for Celestia Arcana
# This file configures automatic deployment to Render with full Python + Node support

services:
  - type: web
    name: celestia-arcana
    runtime: node
    plan: starter  # Free tier available
    region: oregon  # Change to your preferred region

    # Build Configuration
    buildCommand: |
      # Install Node dependencies
      npm install
      # Install Python dependencies
      pip install -r requirements.txt
      # Build SvelteKit application
      npm run build

    # Start Command
    startCommand: node build/index.js

    # Environment Variables
    envVars:
      - key: NODE_VERSION
        value: 20
      - key: PYTHON_VERSION
        value: 3.11
      - key: PORT
        value: 10000  # Render default port
      - key: HOST
        value: 0.0.0.0
      - key: OPENAI_API_KEY
        sync: false  # Set manually in Render dashboard
      - key: ASTRO_TAROT_MODEL
        value: gpt-4o-mini
      - key: ENABLE_RESPONSE_CACHE
        value: true

    # Auto-deploy on Git push
    autoDeploy: true

    # Health check
    healthCheckPath: /

    # Disk storage (optional, for caching)
    disk:
      name: celestia-data
      mountPath: /app/data
      sizeGB: 1
